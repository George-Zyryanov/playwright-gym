# Test Metadata Guide

This guide explains how to use the test metadata system in our Playwright test framework.

## Metadata Fields

Each test should include the following metadata fields:

| Field | Type | Required | Description | Used for Filtering |
|-------|------|----------|-------------|-------------------|
| testId | string | Yes | Unique test identifier | Yes |
| testName | string | Yes | Human-readable test name | No |
| description | string | Yes | Detailed test description | No |
| linkInTestManagementSys | string | No | Link to test in test management system | No |
| priority | 'P1' \| 'P2' \| 'P3' \| 'P4' | Yes | Test priority level | Yes |
| author | string | Yes | Test author name | No |
| linkToJiraTicket | string | No | URL link to associated Jira ticket | No |
| pageUnderTest | string | Yes | Page being tested | Yes |
| featureUnderTest | string | Yes | Feature being tested | Yes |

## Adding Metadata to Tests

Test metadata is defined using the `createTestMetadata` utility function. Here's an example:

```typescript
import test from '@lib/BaseTest';
import { createTestMetadata } from '@lib/TestMetadata';

test('Test Title', createTestMetadata({
  testId: 'TC001',
  testName: 'Verify Login Functionality',
  description: 'Verifies that users can log in with valid credentials',
  linkInTestManagementSys: 'https://testmanagement.example.com/testcase/TC001',
  priority: 'P1',
  author: 'John Doe',
  linkToJiraTicket: 'https://jira.example.com/browse/JIRA-123',
  pageUnderTest: 'LoginPage',
  featureUnderTest: 'Authentication'
}), async ({ page }) => {
  // Test implementation
});
```

## Running Tests Using Metadata

You can use metadata to filter which tests to run:

### Running Tests by Test ID

```bash
npx playwright test --grep @TC001
```

### Running Tests by Priority

```bash
npx playwright test --grep @P1
```

### Running Tests for a Specific Page

```bash
npx playwright test --grep @LoginPage
```

### Running Tests for a Specific Feature

```bash
npx playwright test --grep @Authentication
```

### Running Tests with Multiple Conditions (AND)

```bash
# Run all P1 tests for the Login page
npx playwright test --grep="@LoginPage.*@P1"
```

### Running Tests with Either Condition (OR)

```bash
# Run all P1 or P2 tests
npx playwright test --grep="@P1|@P2"
```

## Viewing Metadata in Reports

The metadata fields are displayed in the HTML report generated by Playwright. They appear as:

1. Tags: Displayed as chips at the top of the test report
2. Annotations: Displayed as key-value pairs in the test details section

## Best Practices

1. **Consistent Naming**: Use consistent naming conventions for pages and features
2. **Test IDs**: Keep test IDs unique across the entire test suite
3. **Descriptions**: Write clear, concise descriptions that explain the test purpose
4. **Prioritization**: Use priorities consistently:
   - P1: Critical path tests that must pass for each release
   - P2: Important functionality tests
   - P3: Edge cases and low-risk functionality
   - P4: Nice-to-have tests that aren't critical for releases
5. **Jira Integration**: Always use the full URL for Jira tickets (e.g., 'https://jira.example.com/browse/JIRA-123')
6. **Updating Metadata**: When modifying a test, always update its metadata to reflect changes 